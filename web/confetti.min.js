let a="PixelPlush Confetti",e={},n={},t="";function o(){PIXI.settings.SCALE_MODE=PIXI.SCALE_MODES.NEAREST,n.snow&&Unicorn.AddParticles("snowupdown",{blendMode:PIXI.BLEND_MODES.DEFAULT,shape:"line",angle:Math.PI/2,startColor:"#ffffff",endColor:"#ffffff",intensity:2,minSpeed:.05,maxSpeed:.2,decay:15},0,-200),n.leaves&&(Unicorn.Load("leaf_gold",t+"/assets/game-parachute/autumn_theme/leaf_gold.png"),Unicorn.Load("leaf1",t+"/assets/game-parachute/autumn_theme/leaf1.png"),Unicorn.Load("leaf2",t+"/assets/game-parachute/autumn_theme/leaf2.png"),Unicorn.Load("leaf3",t+"/assets/game-parachute/autumn_theme/leaf3.png"),Unicorn.Load("leaf4",t+"/assets/game-parachute/autumn_theme/leaf4.png"),Unicorn.Load("leaf5",t+"/assets/game-parachute/autumn_theme/leaf5.png"),Unicorn.Load("leaf6",t+"/assets/game-parachute/autumn_theme/leaf6.png"),Unicorn.Load("oak_gold",t+"/assets/game-parachute/autumn_theme/oak_gold.png"),Unicorn.Load("oak1",t+"/assets/game-parachute/autumn_theme/oak1.png"),Unicorn.Load("oak2",t+"/assets/game-parachute/autumn_theme/oak2.png"),Unicorn.Load("oak3",t+"/assets/game-parachute/autumn_theme/oak3.png"),Unicorn.Load("oak4",t+"/assets/game-parachute/autumn_theme/oak4.png"),Unicorn.Load("oak5",t+"/assets/game-parachute/autumn_theme/oak5.png"),Unicorn.Load("oak6",t+"/assets/game-parachute/autumn_theme/oak6.png"))}const s=["leaf1","leaf2","leaf3","leaf4","leaf5","leaf6","oak1","oak2","oak3","oak4","oak5","oak6"];let c=0,r=[];function u(a){let e=i(1080),n=i(10),t="leaf_"+ ++c,o=Unicorn.AddBacklay(t,a,-100,e,{scale:{x:3,y:3}});o.name=t,o.progress=0,o.offset=n,r.push(o)}function l(a,e){const n=e/1e3;for(let a=0;a<r.length;a++){let e=r[a].progress+=n/10;e>=1?(Unicorn.RemoveBacklay(r[a].name),r.splice(a--,1)):(r[a].x=2480*Math.sin(e)-80,r[a].y+=Math.sin(20*e+r[a].offset),r[a].angle=10*Math.cos(20*e)+60*r[a].offset)}}function h(a,e,n,t,o){if((t.mod||t.broadcaster)&&"leaf"===e){const a=parseInt(n||"10");for(let e=0;e<a;e++)u(s[i(s.length)])}}function f(a,e,n,t,o){u(s[i(s.length)])}function i(a){return Math.floor(a*Math.random())}var m="";async function p(){return fetch("https://api.pixelplush.dev/v1/analytics/heartbeat",{method:"POST",body:JSON.stringify({session:m,game:"confetti",theme:a,channel:n.channel,players:[n.channel],count:1})}).then((a=>a.json()))}window.setupGame=function(s,c,r){a=s,e=c,n=r,t=e.path||"",Unicorn.Create("unicorn-display",{width:1920,height:1080,background:"transparent",init:o,update:l,channel:n.channel,username:n.oauth?n.channel:void 0,password:n.oauth,onCommand:h,onChat:f,gravity:{x:0,y:0}}),ComfyJS.onConnected=async(a,e,n)=>{if(n){let a=await p();0!==a&&(m=a.session,setInterval((()=>{p()}),6e4))}}};