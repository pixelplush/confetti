let a="PixelPlush Confetti",e={},n={},t="",o=1;function s(){PIXI.settings.SCALE_MODE=PIXI.SCALE_MODES.NEAREST,n.snow&&Unicorn.AddParticles("snowupdown",{blendMode:PIXI.BLEND_MODES.DEFAULT,shape:"line",angle:Math.PI/2,startColor:"#ffffff",endColor:"#ffffff",intensity:2,minSpeed:.05,maxSpeed:.2,decay:15},0,-200),n.leaves&&(Unicorn.Load("leaf_gold",t+"/assets/game-parachute/autumn_theme/leaf_gold.png"),Unicorn.Load("leaf1",t+"/assets/game-parachute/autumn_theme/leaf1.png"),Unicorn.Load("leaf2",t+"/assets/game-parachute/autumn_theme/leaf2.png"),Unicorn.Load("leaf3",t+"/assets/game-parachute/autumn_theme/leaf3.png"),Unicorn.Load("leaf4",t+"/assets/game-parachute/autumn_theme/leaf4.png"),Unicorn.Load("leaf5",t+"/assets/game-parachute/autumn_theme/leaf5.png"),Unicorn.Load("leaf6",t+"/assets/game-parachute/autumn_theme/leaf6.png"),Unicorn.Load("oak_gold",t+"/assets/game-parachute/autumn_theme/oak_gold.png"),Unicorn.Load("oak1",t+"/assets/game-parachute/autumn_theme/oak1.png"),Unicorn.Load("oak2",t+"/assets/game-parachute/autumn_theme/oak2.png"),Unicorn.Load("oak3",t+"/assets/game-parachute/autumn_theme/oak3.png"),Unicorn.Load("oak4",t+"/assets/game-parachute/autumn_theme/oak4.png"),Unicorn.Load("oak5",t+"/assets/game-parachute/autumn_theme/oak5.png"),Unicorn.Load("oak6",t+"/assets/game-parachute/autumn_theme/oak6.png"))}const c=["leaf1","leaf2","leaf3","leaf4","leaf5","leaf6","oak1","oak2","oak3","oak4","oak5","oak6"];let u=0,l=[];function r(a){let e=p(1080),n=p(10),t="leaf_"+ ++u,o=Unicorn.AddBacklay(t,a,-100,e,{scale:{x:2,y:2}});o.name=t,o.progress=0,o.offset=n,l.push(o)}function h(a,e){const n=e/1e3;for(let a=0;a<l.length;a++){let e=l[a].progress+=n/10;e>=1?(Unicorn.RemoveBacklay(l[a].name),l.splice(a--,1)):(l[a].x=2480*Math.sin(e)-100,l[a].y+=Math.sin(20*e+l[a].offset),l[a].angle=10*Math.cos(20*e)+60*l[a].offset)}}function f(a,e,n,t,o){if((t.mod||t.broadcaster)&&"leaf"===e){const a=parseInt(n||"10");for(let e=0;e<a;e++)setTimeout((()=>{r(c[p(c.length)])}),100*e)}}let i=0;function m(a,e,n,t,s){i=(i+1)%o,0===i&&r(c[p(c.length)])}function p(a){return Math.floor(a*Math.random())}var g="";async function d(){return fetch("https://api.pixelplush.dev/v1/analytics/heartbeat",{method:"POST",body:JSON.stringify({session:g,game:"confetti",theme:a,channel:n.channel,players:[n.channel],count:1})}).then((a=>a.json()))}window.setupGame=function(c,u,l){a=c,e=u,n=l,t=e.path||"",o=l.nth||1,Unicorn.Create("unicorn-display",{width:1920,height:1080,background:"transparent",init:s,update:h,channel:n.channel,username:n.oauth?n.channel:void 0,password:n.oauth,onCommand:f,onChat:m,gravity:{x:0,y:0}}),ComfyJS.onConnected=async(a,e,n)=>{if(n){let a=await d();0!==a&&(g=a.session,setInterval((()=>{d()}),6e4))}}};