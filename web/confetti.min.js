let a="PixelPlush Confetti",e={},n={},t="",o=1;function s(){PIXI.settings.SCALE_MODE=PIXI.SCALE_MODES.NEAREST,n.snow&&Unicorn.AddParticles("snowupdown",{blendMode:PIXI.BLEND_MODES.DEFAULT,shape:"line",angle:Math.PI/2,startColor:"#ffffff",endColor:"#ffffff",intensity:2,minSpeed:.05,maxSpeed:.2,decay:15},0,-200),n.leaves&&(Unicorn.Load("leaf_gold",t+"/assets/game-parachute/autumn_theme/leaf_gold.png"),Unicorn.Load("leaf1",t+"/assets/game-parachute/autumn_theme/leaf1.png"),Unicorn.Load("leaf2",t+"/assets/game-parachute/autumn_theme/leaf2.png"),Unicorn.Load("leaf3",t+"/assets/game-parachute/autumn_theme/leaf3.png"),Unicorn.Load("leaf4",t+"/assets/game-parachute/autumn_theme/leaf4.png"),Unicorn.Load("leaf5",t+"/assets/game-parachute/autumn_theme/leaf5.png"),Unicorn.Load("leaf6",t+"/assets/game-parachute/autumn_theme/leaf6.png"),Unicorn.Load("oak_gold",t+"/assets/game-parachute/autumn_theme/oak_gold.png"),Unicorn.Load("oak1",t+"/assets/game-parachute/autumn_theme/oak1.png"),Unicorn.Load("oak2",t+"/assets/game-parachute/autumn_theme/oak2.png"),Unicorn.Load("oak3",t+"/assets/game-parachute/autumn_theme/oak3.png"),Unicorn.Load("oak4",t+"/assets/game-parachute/autumn_theme/oak4.png"),Unicorn.Load("oak5",t+"/assets/game-parachute/autumn_theme/oak5.png"),Unicorn.Load("oak6",t+"/assets/game-parachute/autumn_theme/oak6.png"))}const l=["leaf1","leaf2","leaf3","leaf4","leaf5","leaf6","oak1","oak2","oak3","oak4","oak5","oak6"];let c=0,f=[];function r(a){let e=n.leaves2?p(1080):p(2160)-1080,t=p(10),o="leaf_"+ ++c,s=Unicorn.AddBacklay(o,a,-100,e,{scale:{x:2,y:2}});s.name=o,s.progress=0,s.offset=t,f.push(s)}function u(a,e){const t=e/1e3;for(let a=0;a<f.length;a++){let e=f[a].progress+=t/10;e>=1?(Unicorn.RemoveBacklay(f[a].name),f.splice(a--,1)):n.leaves2?(f[a].x=2480*Math.sin(e)-100,f[a].y+=Math.sin(20*e+f[a].offset),f[a].angle=10*Math.cos(20*e)+60*f[a].offset):(f[a].x=2480*Math.sin(e)-100,f[a].y+=t/10*1080+f[a].offset/10+Math.sin(20*e+f[a].offset),f[a].angle=10*Math.cos(20*e)+60*f[a].offset)}}function h(a,e,t,o,s){if((o.mod||o.broadcaster)&&"leaf"===e){const a=parseInt(t||"10"),e=4;for(let t=0;t<e;t++)for(let t=0;t<a/e;t++)setTimeout((()=>{r(l[p(l.length)])}),(n.leaves2?100:150)*(t+e)+p(n.leaves2?100:2e3))}}let i=0;function m(a,e,n,t,s){i=(i+1)%o,0===i&&r(l[p(l.length)])}function p(a){return Math.floor(a*Math.random())}var g="";async function d(){return fetch("https://api.pixelplush.dev/v1/analytics/heartbeat",{method:"POST",body:JSON.stringify({session:g,game:"confetti",theme:a,channel:n.channel,players:[n.channel],count:1})}).then((a=>a.json()))}window.setupGame=function(l,c,f){a=l,e=c,n=f,t=e.path||"",o=f.nth||1,Unicorn.Create("unicorn-display",{width:1920,height:1080,background:"transparent",init:s,update:u,channel:n.channel,username:n.oauth?n.channel:void 0,password:n.oauth,onCommand:h,onChat:m,gravity:{x:0,y:0}}),ComfyJS.onConnected=async(a,e,n)=>{if(n){let a=await d();0!==a&&(g=a.session,setInterval((()=>{d()}),6e4))}}};